	LIST P=16F84



AUX		EQU	12H
PCL		EQU	02H
SEG		EQU	11H
PB		EQU	06H
TRISB	EQU	06H
STATUS	EQU	03H
OP		EQU	01H
INTCON	EQU	0BH
VAR		EQU	10H
TMR0	EQU	01H
MIN		EQU	15H
MIN10	EQU	16H
SEG10	EQU	17H
RETA	EQU	18H
PA		EQU	05H
TRISA	EQU	05H
HORA	EQU	20H
HORA10	EQU	19H
VAL		EQU	21H
VAL1	EQU	22H


	ORG	0
	GOTO	START


	ORG	80
START	BSF	STATUS,5
	CLRF	TRISB
	MOVLW	B'00010011'
	MOVWF	TRISA
	MOVLW	B'00000111'
	MOVWF	OP
	BCF	STATUS,5
	MOVLW	B'10100000'	
	MOVWF	INTCON
	CLRF	SEG
	CLRF	VAR
	MOVLW	D'100'
	MOVWF	VAR
	MOVLW	D'217'
	MOVWF	TMR0
	CLRF	SEG10
	CLRF	MIN
	CLRF	MIN10
	CLRF	HORA
	CLRF	HORA10
	BCF	PA,3
	BCF	VAL,0


INICIO
	BTFSS	PA,0
	GOTO	MINU	
	BCF	VAL,0
	BTFSS	PA,1
	GOTO	HOR
	BCF	VAL1,0
Z1	MOVF	MIN,0
	MOVWF	PB
	BSF	PB,4
	CALL	RETARDO
	BCF	PB,4
	MOVF	MIN10,0
	MOVWF	PB
	BSF	PB,5
	CALL	RETARDO
	BCF	PB,5
	MOVF	HORA,0
	MOVWF	PB
	BSF	PB,6
	CALL	RETARDO
	BCF	PB,6
	MOVF	HORA10,0
	MOVWF	PB
	BSF	PB,7
	CALL	RETARDO
	BCF	PB,7
	GOTO	INICIO

MINU	BTFSC	VAL,0
	GOTO	M1
	BSF		VAL,0
	INCF	MIN,1
	MOVF	MIN,0
	SUBLW	D'10'
	BTFSS	STATUS,2
	GOTO	M1
	CLRF	MIN
	INCF	MIN10,1
	MOVF	MIN10,0
	SUBLW	D'6'
	BTFSS	STATUS,2
	GOTO	M1
	CLRF	MIN10
M1	GOTO	Z1	

HOR	BTFSC	VAL1,0
	GOTO	H1
	BSF		VAL1,0
	INCF	HORA,1
	MOVF	HORA,0
	SUBLW	D'10'
	BTFSS	STATUS,2
	GOTO	H2
	CLRF	HORA
	INCF	HORA10,1
	GOTO	H1
H2	MOVF	HORA,0
	SUBLW	D'4'
	BTFSS	STATUS,2
	GOTO	H1
	MOVF	HORA10,0
	SUBLW	D'2'
	BTFSS	STATUS,2
	GOTO	H1
	CLRF	HORA
	CLRF	HORA10
H1	GOTO	Z1	


RETARDO	MOVLW	H'FF'
	MOVWF	RETA
B1	DECFSZ	RETA,1
	GOTO	B1
	RETURN

	
	ORG	4
	MOVWF	AUX
	DECFSZ	VAR,1
	GOTO	A1
	BTFSS	PA,2
	GOTO	UNO
	BCF	PA,2
	GOTO	CERO
UNO	BSF	PA,2
CERO	INCF	SEG,1
	MOVF	SEG,0
	SUBLW	D'60'
	BTFSS	STATUS,2
	GOTO	A2
	CLRF	SEG
	INCF	MIN,1
	MOVF	MIN,0
	SUBLW	D'10'
	BTFSS	STATUS,2
	GOTO	A2
	CLRF	MIN
	INCF	MIN10,1
	MOVF	MIN10,0
	SUBLW	D'6'
	BTFSS	STATUS,2
	GOTO	A2
	CLRF	MIN10
	INCF	HORA,1
	MOVF	HORA,0
	SUBLW	D'10'
	BTFSS	STATUS,2
	GOTO	A5
	CLRF	HORA
	INCF	HORA10,1
	GOTO	A2
A5	MOVF	HORA,0
	SUBLW	D'4'
	BTFSS	STATUS,2
	GOTO	A2
	MOVF	HORA10,0
	SUBLW	D'2'
	BTFSS	STATUS,2
	GOTO	A2
	CLRF	HORA
	CLRF	HORA10
A2	MOVLW	D'100'
	MOVWF	VAR
A1	MOVLW	D'217'
	MOVWF	TMR0
	BCF	INTCON,2
	MOVF	AUX,0
	RETFIE
	
	END
	
	